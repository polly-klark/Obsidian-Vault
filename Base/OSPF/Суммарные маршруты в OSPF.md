#ospf 

Суммарные маршруты в OSPF — это механизм агрегации нескольких маршрутов в один для оптимизации работы протокола. Вот ключевые аспекты:

---

## Определение
Суммарные маршруты объединяют несколько подсетей в один диапазон, уменьшая размер базы данных LSDB и снижая нагрузку на процессор маршрутизатора. Используются для межзональной и внешней маршрутизации.

---

## Типы суммирования
### 1. Межзональное (Interarea Route Summarization)
- Где применяется: На ABR (Area Border Router).
- LSA: Type 3 (Summary LSA).
- Пример:  
  Если в зоне 1 есть сети 10.0.0.0/24 и 10.0.1.0/24, ABR может объединить их в 10.0.0.0/23 для Backbone Area (Area 0).

---

### 2. Внешнее (External Route Summarization)
- Где применяется: На ASBR (Autonomous System Boundary Router).
- LSA: Type 5 (AS External LSA) или Type 7 (NSSA External LSA).
- Пример:  
  ASBR может суммировать внешние маршруты из EIGRP в 192.168.0.0/16 перед распространением в OSPF.

---

## Как это работает
1. Создание суммарного маршрута  
   - Условие: Существует хотя бы одна подсеть в диапазоне.
   - Метрика: Равна наименьшей стоимости среди входящих маршрутов[1][2].

2. Предотвращение петель  
   ABR создаёт Null0 для суммарного диапазона, чтобы избежать петель[1][3].

---

## Преимущества
| Параметр       | Без суммирования       | С суммированием          |
|---------------------|-----------------------------|-------------------------------|
| Размер LSDB     | Большой                     | Уменьшается                  |
| Трафик LSA      | Высокий                     | Снижается                    |
| Сходимость      | Медленнее                   | Быстрее                      |
| Ресурсы CPU     | Высокая нагрузка            | Оптимизированы                |

---

## Настройка на Cisco
### Межзональное суммирование

```bash
router ospf 1
 area 1 range 10.0.0.0 255.255.254.0  # Суммирует 10.0.0.0/23
```
### Внешнее суммирование

```bash
router ospf 1
 summary-address 192.168.0.0 255.255.255.0  # Суммирует внешние маршруты
```

---

## Особенности
1. Бесклассовый протокол  
   OSPF поддерживает любые маски подсетей для суммирования[1][3].

2. Смежность сетей  
   Суммируемые сети должны быть непрерывными (например, 10.0.0.0/23 объединяет 10.0.0.0/24 и 10.0.1.0/24)[2][3].

---

## Пример из практики
Если в зоне 1 есть сети 10.0.0.0/24 и 10.0.1.0/24, ABR может суммировать их в 10.0.0.0/23. При падении одной из подсетей:
- Без суммирования: Все маршрутизаторы пересчитают SPF.
- С суммированием: Изменения остаются локальными для зоны 1[1][2].

---

## LSA и суммирование
| LSA | Тип       | Назначение                          |
|---------|---------------|-----------------------------------------|
| 3   | Summary       | Межзональные суммарные маршруты         |
| 5   | AS External   | Внешние маршруты (ASBR)                 |
| 7   | NSSA External | Внешние маршруты в NSSA-зонах           |

---

## Важные нюансы
1. Null0  
   Создаётся автоматически для суммарного диапазона, чтобы избежать петель[1][3].

2. Теги  
   Для внешних маршрутов можно добавлять теги через summary-address ... tag для фильтрации[3].

---

## Итог
Суммарные маршруты — ключевой механизм масштабирования OSPF. Они уменьшают нагрузку на сеть и ресурсы маршрутизаторов, агрегируя сети на границах зон или автономных систем.

Citations:
[1] https://q05t9n.wordpress.com/2015/10/28/5-%D1%81%D1%83%D0%BC%D0%BC%D0%B0%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D0%B2-ospf/
[2] https://mcp1971.livejournal.com/7775.html
[3] https://studfile.net/preview/5759717/page:70/
[4] https://dzen.ru/a/Y3tRB8YWsVuy6Tqs
[5] https://selectel.ru/blog/ospf/
[6] https://ru.wikipedia.org/wiki/OSPF
[7] https://habr.com/ru/articles/418391/
[8] https://www.smart-soft.ru/blog/protokol_marshrutizatsii_ospf/

---
Answer from Perplexity: https://www.perplexity.ai/search/kak-realizovat-sokhranenie-pid-5O_4ZMHNQHKu22oHLR8z.Q?utm_source=copy_output
#htb #wireshark #traffic #network 

Цель этой лабораторной работы — познакомить вас с Wireshark и научить использовать его графический интерфейс для захвата трафика. Мы потренируемся в использовании фильтров захвата и отображения и привыкнем к различным результатам, выдаваемым этим инструментом.

Пользователь принёс свой ноутбук в службу поддержки с жалобой на необычно долгое время загрузки при попытке выйти в интернет. Он сказал, что это похоже на то, как если бы сеть была перегружена и компьютер устанавливал множество различных соединений. Нам поручили проверить, правильно ли работает компьютер. Для этого мы подключаем его к сети и запускаем захват пакетов во время выхода в интернет. Анализируем полученные данные, чтобы определить, всё ли в порядке. В данный момент нас интересует только этот ноутбук, поэтому отфильтруйте весь трафик, который не предназначен для него или не исходит от него.

 Если вы хотите подойти к выполнению этого лабораторного задания более творчески, я опубликовал список общих задач. Более подробное описание того, как выполнить каждый шаг, приведено под каждой задачей в блоке с решениями.

---

## Задачи

#### Задача №1

`Validate Wireshark is installed, then open Wireshark and familiarize yourself with the GUI windows and toolbars.`

Уделите минутку и изучите графический интерфейс Wireshark. Убедитесь, что вы знаете, какие опции находятся на каких вкладках в меню команд. Пожалуйста, обратите особое внимание на вкладку «Захват» и её содержимое.

---

#### Задача №2

`Select an interface to run a capture on and create a capture filter to show only traffic to and from your host IP.`

Выберите активный интерфейс (eth0 или Wi-Fi-карту) для захвата данных.

##### **Нажмите, чтобы показать ответ**

На главном экране выберите интерфейс, который вы хотите записать, в раскрывающемся меню. Вы также можете нажать на вкладку «Запись» → «Параметры» → «Интерфейс» → затем выбрать подходящий интерфейс.

---

#### Задача №3

`Create a capture filter.`

Далее мы хотим создать фильтр захвата, который будет показывать только трафик, исходящий с нашего IP-адреса или направляющийся на него, и применить его.

##### **Нажмите, чтобы показать ответ**

Для этого на главном экране выберите параметры захвата и введите хост-фильтр X.X.X.X (или IP-адрес вашего интерфейса)  
. Если фильтр захвата настроен правильно, нажмите «Начать».

---

#### Задача №4

`Navigate to a webpage to generate some traffic.`

Откройте веб-браузер и перейдите на сайт pepsi.com. Повторите этот шаг для http://apache.org. Пока страница загружается, вернитесь в окно Wireshark. Мы должны увидеть трафик, проходящий через наше окно захвата. Как только страница загрузится, остановите захват, нажав на красный квадрат с надписью «Остановить» на панели действий.

---

#### Задание №5

`Use the capture results to answer the following questions.`

Устанавливается ли несколько сеансов связи между устройством и веб-сервером? Как это определить?

Какие протоколы прикладного уровня отображаются в результатах?

Можем ли мы что-нибудь разобрать в открытом тексте? Что это было?

##### **Нажмите, чтобы показать ответ**

При посещении сайтов pepsi.com и http://apache.org вы бы увидели несколько разных потоков и множество различных протоколов. DNS для запроса записей для страниц, HTTP для сайта apache.org, HTTPS для Pepsi.com, а также любой другой трафик, который в тот момент происходил в вашем сегменте сети. Если вы заметили разницу в трафике, значит, вы на верном пути. Если вы посмотрите на вывод apache.org, то увидите, что он представлен в виде обычного текста. Это происходит потому, что HTTP не зашифрован. Однако анализ HTTPS-трафика будет сильно отличаться.

Не останавливайтесь на достигнутом. Уделите немного времени тому, чтобы ознакомиться с возможностями Wireshark и тем, как можно изменить представление данных. Мы также можем использовать примеры файлов PCAP, которые можно найти по адресу https://wiki.wireshark.org/SampleCaptures, для анализа различных протоколов и даже таких вещей, как трафик ICS SCADA и вирусы. Если для выполнения этой лабораторной работы вы подключены к сети Академии, уделите немного времени сбору трафика на предоставленном интерфейсе. Если хорошенько поискать, можно найти интересный сетевой трафик.

---

## Краткие сведения

К концу этого лабораторного занятия мы должны хорошо разбираться в Wireshark, а также в том, как выглядит и работает графический интерфейс. Мы ознакомились с панелью команд и панелью действий, а также с тем, что находится на каждой из соответствующих вкладок. Вы должны понимать, как выбрать интерфейс для захвата данных и успешно начать захват с применением фильтра. Поэкспериментируйте с несколькими фильтрами собственной разработки, чтобы увидеть, какие комбинации можно использовать и как они влияют на результаты.
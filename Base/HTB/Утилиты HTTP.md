#htb #http

Поскольку почти каждый современный бизнес так или иначе зависит от интернета — будь то веб-серверы, API или HTTP(S)-запросы, — важно иметь в своём арсенале инструменты, которые делают взаимодействие с этими технологиями эффективным, быстрым и простым в управлении.

Эти инструменты должны быть способны выполнять для нас следующие задачи:

- Тестирование и изучение API с использованием различных HTTP-методов и полезной нагрузки
- Отладка HTTP-запросов путем проверки заголовков и ответов
- Автоматизация взаимодействия с API в скриптах или конвейерах
- Обработка сложных запросов с аутентификацией, загрузкой файлов или пользовательскими заголовками
- Загрузка файлов или передача данных по протоколу HTTP/HTTPS

---

## Curlie

[Curlie](https://github.com/rs/curlie) — один из лучших инструментов, который мы можем использовать для таких целей. Он основан на `curl` и `httpie`, что расширяет его функциональность. Мы можем скачать этот инструмент с помощью следующей команды:

  Утилиты HTTP

```shell-session
cry0l1t3@ubuntu:~$ curl -sS https://webinstall.dev/curlie | bash
```

Теперь давайте сравним `curlie` с `curl` и запросим ту же конечную точку API.

![Терминал, отображающий запрос API на thecatapi.com с ответом в формате JSON, содержащим URL-адрес изображения и его размеры.](https://academy.hackthebox.com/storage/modules/87/http1.png)

Как видите, он предоставляет красочный и структурированный вывод в удобном для пользователя формате с гораздо большим количеством информации, чем `curl`. Кроме того, он значительно упрощает анализ запросов и отладку.

---

## Postman

[Postman](https://www.postman.com/downloads/) — это широко используемая платформа и инструмент для разработки, тестирования и совместной работы с API. Он предлагает как графический пользовательский интерфейс (GUI), так и интерфейс командной строки для оптимизации рабочих процессов. Postman разработан для упрощения процесса проектирования, тестирования, документирования и мониторинга API, что делает его незаменимым инструментом для многих разработчиков и тестировщиков, работающих с REST, GraphQL, gRPC и другими типами API. Хотя Postman хорошо подходит для совместной работы, в нашем случае, когда мы в основном выполняем разовые запросы к API, он несколько избыточен. По сравнению с `curlie` он работает медленнее и включает в себя множество функций, которые не нужны для простого тестирования конечных точек API.

Однако, если ваш сценарий использования предполагает нечто большее, чем базовое тестирование, Postman — отличный инструмент, который стоит рассмотреть. Пакет для установки можно скачать с официального сайта.

![Загрузите страницу Postman с опциями для Linux (x64) и Linux (arm64), а также предварительный просмотр интерфейса Postman.](https://academy.hackthebox.com/storage/modules/87/http2.png)

После загрузки пакета мы можем извлечь его содержимое и запустить двоичный файл.

  Утилиты HTTP

```shell-session
cry0l1t3@ubuntu:~$ cd ~/Downloads
cry0l1t3@ubuntu:~$ tar -xzvf ./postman-linux-x64.tar.gz
cry0l1t3@ubuntu:~$ cd Postman
cry0l1t3@ubuntu:~$ ./Postman
```

В новом окне мы должны увидеть страницу регистрации/входа в систему. Однако изначально регистрация не требуется, и впоследствии мы можем пропустить процесс регистрации/входа в систему.

![Страница входа в Postman API Platform с полями для ввода электронной почты, возможностью создать бесплатную учетную запись, продолжить работу с Google или использовать единый вход.](https://academy.hackthebox.com/storage/modules/87/http3.png)

Теперь мы должны увидеть панель с историей запросов, поле ввода URL-адреса для конечной точки API, таблицу с параметрами запроса и поле для ответа, в котором отображаются результаты наших запросов.

![Интерфейс Postman с возможностью создания запроса с разделением на параметры, авторизацию, заголовки и тело запроса.](https://academy.hackthebox.com/storage/modules/87/http4.png)

Давайте укажем URL-адрес, добавим заголовки и отправим запрос.

![Интерфейс Postman, показывающий запрос GET на urlscan.io с заголовками и параметрами запроса.](https://academy.hackthebox.com/storage/modules/87/http5.png)

В окне с ответом ниже мы увидим весь ответ, полученный от API (который мы можем проанализировать шаг за шагом).

![Интерфейс Postman, демонстрирующий запрос GET к API urlscan.io с подробностями ответа в формате JSON, включая информацию о сервере и данные о домене.](https://academy.hackthebox.com/storage/modules/87/http6.png)

---

## Posting.sh

Альтернативой Postman на основе терминала является [Posting.sh](https://posting.sh/). Этот легковесный инструмент предоставляет пользовательский интерфейс на основе терминала с интуитивно понятным рабочим процессом, ориентированным на клавиатуру. Это означает, что мы можем быстро выполнять все действия и запросы, связанные с HTTP, с помощью клавиатуры, не прикасаясь к мыши.

![Клиентский интерфейс API на основе терминала, отображающий POST-запрос к jsonplaceholder.typicode.com с ответом в формате JSON, заголовками и деталями запроса.](https://academy.hackthebox.com/storage/modules/87/http7.png)

Давайте установим его, а затем создадим новый каталог, в котором будут храниться все наши запросы:

  Утилиты HTTP

```shell-session
cry0l1t3@ubuntu:~$ sudo apt install pipx -y
cry0l1t3@ubuntu:~$ pipx install posting
cry0l1t3@ubuntu:~$ mkdir myrequests && cd myrequests
cry0l1t3@ubuntu:~$ posting
```

В нижней части вы увидите новую панель с ярлыками, которые можно использовать для управления пользовательским интерфейсом, похожим на Postman. После отправки запроса в окне ответа отобразится содержимое данных, полученных от API.

![Интерфейс терминала, отображающий запрос GET на v1.cveapi.com с подробностями ответа в формате JSON для CVE-2019-9956.](https://academy.hackthebox.com/storage/modules/87/http8.png)


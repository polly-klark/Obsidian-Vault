#windows #cmd #htb 

Встроенная командная оболочка CMD.exe и PowerShell — это две реализации, встроенные во все хосты Windows. Эти инструменты обеспечивают прямой доступ к операционной системе, автоматизируют рутинные задачи и предоставляют пользователю детальный контроль над любыми аспектами работы компьютера и установленных приложений. Этот модуль даст нам знания, навыки и умения для эффективного администрирования хостов Windows с помощью командной строки.

С точки зрения тестирования на проникновение, мы узнаем, как использовать встроенные инструменты и команды Windows, а также сторонние скрипты и приложения для разведки, эксплуатации и кражи данных из среды Windows, когда перейдём к более продвинутым модулям HTB Academy.

---

## Командная строка против PowerShell

Между командной строкой Windows и PowerShell есть несколько ключевых различий, которые мы рассмотрим в этом модуле. Одно из ключевых различий заключается в том, что вы можете запускать команды командной строки из консоли PowerShell, но для запуска команд PowerShell из командной строки вам нужно будет предварять команду `powershell` (т. е. `powershell get-alias`). В следующей таблице описаны некоторые другие ключевые различия.

|PowerShell|Командная строка|
|---|---|
|Представлен в 2006 году|Представлен в 1981 году|
|Может запускать как пакетные команды, так и командлеты PowerShell|Может выполнять только пакетные команды|
|Поддерживает использование псевдонимов команд|Не поддерживает псевдонимы команд|
|Выходные данные командлета могут быть переданы другим командлетам|Выходные данные команды не могут быть переданы другим командам|
|Все выходные данные представлены в виде объекта|Выводом команд является текст|
|Возможность выполнения последовательности командлетов в скрипте|Команда должна завершиться до того, как сможет быть запущена следующая команда|
|Имеет интегрированную среду написания сценариев (ISE)|Не имеет ISE|
|Может получить доступ к библиотекам программирования, потому что он построен на .NET Framework|Не удается получить доступ к этим библиотекам|
|Может быть запущен в системах Linux|Может быть запущен только в системах Windows|

Как мы видим, командная строка — это гораздо более статичный способ взаимодействия с операционной системой, в то время как PowerShell — это мощный язык сценариев, который можно использовать для решения самых разных задач и создания простых и очень сложных скриптов.

---

## Сценарий

В этом модуле мы рассмотрим сценарий, который поможет нам не отклоняться от темы и понять, как эти инструменты и команды могут помочь в нашей работе.

Рассмотрим этот сценарий:

Мы — системный администратор, который хочет расширить свой кругозор и попробовать себя в пентестинге. Прежде чем мы обратимся к нашему руководителю и руководителю внутренней «красной команды» с просьбой о стажировке, мы должны сначала попрактиковаться и получить базовое представление о первичных интерфейсах командной строки Windows: `PowerShell` и `Command Prompt`. Вскоре у них не останется выбора, кроме как принять нас в качестве сертифицированных `Command Line Ninja` и предоставить нам место за столом переговоров.

---

## Инструкции по подключению

В этом модуле у вас будет доступ к нескольким хостам Windows, с которых вы сможете выполнять любые действия, необходимые для выполнения лабораторных упражнений. Поскольку мы работаем в модуле, основанном исключительно на командной строке, в этом задании `SSH` будет использоваться только для подключения к целевым объектам.

Чтобы подключиться к целевым хостам в качестве пользователя по SSH, используйте следующий формат:

  Введение

```shell-session
ssh htb-student@<IP-Address> 
```

После подключения вам будет предложено принять сертификат хоста и ввести пароль пользователя для полного входа в систему. После аутентификации вы можете приступать к работе.
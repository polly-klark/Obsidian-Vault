#web #htb 

Другим важным аспектом безопасности внешнего интерфейса является проверка и очистка вводимых пользователем данных. Во многих случаях проверка и очистка вводимых пользователем данных выполняются на сервере. Однако в некоторых случаях вводимые пользователем данные не попадают на сервер, а полностью обрабатываются и отображаются на внешнем интерфейсе. Поэтому крайне важно проверять и очищать вводимые пользователем данные как на внешнем, так и на внутреннем интерфейсе.

[Внедрение HTML-кода](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/11-Client-side_Testing/03-Testing_for_HTML_Injection) происходит, когда на странице отображается нефильтрованный пользовательский ввод. Это может происходить либо при получении ранее отправленного кода, например при получении комментария пользователя из внутренней базы данных, либо при непосредственном отображении нефильтрованного пользовательского ввода через `JavaScript` на внешнем интерфейсе.

Когда пользователь полностью контролирует отображение вводимых данных, он может отправить `HTML` код, и браузер отобразит его как часть страницы. Это может быть вредоносный `HTML` код, например внешняя форма для входа в систему, которая может использоваться для того, чтобы обманом заставить пользователя войти в систему, а на самом деле отправить его учётные данные на вредоносный сервер для сбора информации в целях других атак.

Другим примером `HTML Injection` является порча веб-страниц. Она заключается во внедрении нового `HTML` кода для изменения внешнего вида веб-страницы, добавления вредоносной рекламы или даже полной замены страницы. Такой тип атаки может нанести серьёзный репутационный ущерб компании, на сайте которой размещено веб-приложение.

---

#### Пример

Следующий пример представляет собой очень простую веб-страницу с одной кнопкой «`Click to enter your name`». При нажатии на кнопку появляется запрос на ввод имени, после чего имя отображается как «`Your name is ...`»:

![[Pasted image 20251227203218.png]]

Если не выполняется очистка вводимых данных, это может стать лёгкой мишенью для `HTML Injection` и `Cross-Site Scripting (XSS)` атак. Мы изучили исходный код страницы и не обнаружили никакой очистки вводимых данных, поскольку страница принимает вводимые пользователем данные и отображает их напрямую:

Код: html

```html
<!DOCTYPE html>
<html>

<body>
    <button onclick="inputFunction()">Click to enter your name</button>
    <p id="output"></p>

    <script>
        function inputFunction() {
            var input = prompt("Please enter your name", "");

            if (input != null) {
                document.getElementById("output").innerHTML = "Your name is " + input;
            }
        }
    </script>
</body>

</html>
```

Чтобы проверить `HTML Injection`, мы можем просто ввести небольшой фрагмент кода `HTML` в качестве имени и посмотреть, отображается ли он на странице. Мы протестируем следующий код, который меняет фоновое изображение веб-страницы:

Код: html

```html
<style> body { background-image: url('https://academy.hackthebox.com/images/logo.svg'); } </style>
```

Как только мы вводим его, фоновое изображение на веб-странице мгновенно меняется:

![[Pasted image 20251227203236.png]]

В этом примере, поскольку все действия выполняются на стороне клиента, при обновлении веб-страницы все вернется в нормальное состояние.
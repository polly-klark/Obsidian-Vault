#htb #linux 

Поскольку мы будем работать с множеством различных систем Linux, нам нужно изучить структуру и информацию о системе, её процессах, сетевых конфигурациях, пользователях, каталогах, настройках пользователей и соответствующих параметрах. Вот список необходимых инструментов, которые помогут нам получить вышеуказанную информацию. Большинство из них установлены по умолчанию.

|**Команда**|**Описание**|
|---|---|
|`whoami`|Отображает текущее имя пользователя.|
|`id`|Возвращает личность пользователя|
|`hostname`|Задает или печатает имя текущей хост-системы.|
|`uname`|Выводит основную информацию о названии операционной системы и системном оборудовании.|
|`pwd`|Возвращает имя рабочего каталога.|
|`ifconfig`|Утилита ifconfig используется для назначения или просмотра адреса сетевого интерфейса и/или настройки параметров сетевого интерфейса.|
|`ip`|Ip — это утилита для отображения или управления маршрутизацией, сетевыми устройствами, интерфейсами и туннелями.|
|`netstat`|Показывает состояние сети.|
|`ss`|Еще одна утилита для исследования сокетов.|
|`ps`|Показывает состояние процесса.|
|`who`|Показывает, кто вошел в систему.|
|`env`|Печатает окружение или задает и выполняет команду.|
|`lsblk`|Список блокируемых устройств.|
|`lsusb`|Список USB-устройств|
|`lsof`|Список открытых файлов.|
|`lspci`|Список устройств PCI.|

Давайте рассмотрим несколько примеров.

### Имя хоста

Команда `hostname` довольно проста и выводит на экран имя компьютера, на котором мы вошли в систему

  Системная информация

```shell-session
Barlogsha@htb[/htb]$ hostname

nixfund
```

### Кто

Эту быструю и простую команду можно использовать как в Windows, так и в Linux, чтобы узнать текущее имя пользователя. Во время оценки безопасности мы получаем доступ к обратной оболочке на хосте, и одна из первых задач, которую мы должны выполнить, — это выяснить, от имени какого пользователя мы работаем. После этого мы можем определить, есть ли у пользователя особые привилегии/доступ.

  Системная информация

```shell-session
cry0l1t3@htb[/htb]$ whoami

cry0l1t3
```

### ID

Команда `id` расширяет команду `whoami` и выводит информацию о членстве в группах и идентификаторах. Это может быть интересно тестировщикам на проникновение, которые хотят узнать, к каким ресурсам может иметь доступ пользователь, а также системным администраторам, которые хотят проверить разрешения учётных записей и членство в группах. В этом выводе группа `hackthebox` представляет интерес, потому что она нестандартная. Группа `adm` означает, что пользователь может читать файлы журналов в `/var/log` и потенциально может получить доступ к конфиденциальной информации. Членство в группе `sudo` представляет особый интерес, поскольку это означает, что наш пользователь может выполнять некоторые или все команды от имени всемогущего пользователя `root` Права суперпользователя могут помочь нам повысить привилегии или могут стать сигналом для системного администратора о том, что ему нужно проверить разрешения и членство в группах, чтобы удалить любой доступ, который не требуется пользователю для выполнения повседневных задач.

  Системная информация

```shell-session
cry0l1t3@htb[/htb]$ id

uid=1000(cry0l1t3) gid=1000(cry0l1t3) groups=1000(cry0l1t3),1337(hackthebox),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
```

### Uname

Давайте подробнее рассмотрим команду `uname` . Если мы введём `man uname` в терминале, то увидим справочную страницу для этой команды, в которой будут показаны возможные параметры, которые мы можем использовать с этой командой, и результаты.

  Системная информация

```shell-session

UNAME(1)                                    User Commands                                   UNAME(1)

NAME
       uname - print system information

SYNOPSIS
       uname [OPTION]...

DESCRIPTION
       Print certain system information.  With no OPTION, same as -s.

       -a, --all
              print all information, in the following order, except omit -p and -i if unknown:

       -s, --kernel-name
              print the kernel name

       -n, --nodename
              print the network node hostname

       -r, --kernel-release
              print the kernel release

       -v, --kernel-version
              print the kernel version

       -m, --machine
              print the machine hardware name

       -p, --processor
              print the processor type (non-portable)

       -i, --hardware-platform
              print the hardware platform (non-portable)

       -o, --operating-system
```

При запуске `uname -a` будет выведена вся информация о компьютере в определённом порядке: имя ядра, имя хоста, версия ядра, версия операционной системы, название аппаратного обеспечения и операционная система. Флаг `-a` не будет отображать `-p` (тип процессора) и `-i` (аппаратную платформу), если они неизвестны.

  Системная информация

```shell-session
cry0l1t3@htb[/htb]$ uname -a

Linux box 4.15.0-99-generic #100-Ubuntu SMP Wed Apr 22 20:32:56 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
```

Из приведенной выше команды мы можем видеть, что имя ядра - это `Linux`, имя хоста - это `box`, выпуск ядра - это `4.15.0-99-generic`, версия ядра - это `#100-Ubuntu SMP Wed Apr 22 20:32:56 UTC 2020`, и так далее. Запуск любой из этих опций сам по себе даст нам конкретный вывод битов, который нас интересует.

### Uname для получения релиза ядра

Предположим, мы хотим вывести на печать версию ядра, чтобы быстро найти потенциальные уязвимости ядра. Для получения этой информации мы можем ввести `uname -r`

  Системная информация

```shell-session
cry0l1t3@htb[/htb]$ uname -r

4.15.0-99-generic
```

Обладая этой информацией, мы могли бы выполнить поиск по запросу «4.15.0-99-универсальный эксплойт», и первый [результат](https://www.exploit-db.com/exploits/47163) сразу же показался бы нам полезным.

Настоятельно рекомендуется изучить команды и понять, для чего они нужны и какую информацию могут предоставить. Несмотря на то, что это немного утомительно, мы можем многому научиться, изучая справочные страницы по распространённым командам. Мы можем даже узнать о том, что не знали о возможностях той или иной команды. Эта информация используется не только для работы с Linux. Однако она также будет использоваться позже для обнаружения уязвимостей и неправильных настроек в системе Linux, которые могут способствовать повышению привилегий. Вот несколько дополнительных упражнений, которые мы можем выполнить для практики и которые помогут нам ознакомиться с некоторыми командами.

---

## Вход в систему через SSH

`Secure Shell` (`SSH`) — это протокол, который позволяет клиентам получать доступ к удалённым компьютерам и выполнять на них команды или действия. На хостах и серверах под управлением Linux или другой Unix-подобной операционной системы SSH является одним из постоянно установленных стандартных инструментов и предпочтительным выбором для многих администраторов при настройке и обслуживании компьютеров с помощью удалённого доступа. Это старый и хорошо зарекомендовавший себя протокол, который не требует графического пользовательского интерфейса (GUI) и не предлагает его. По этой причине он работает очень эффективно и занимает мало ресурсов. Мы используем этот тип подключения в следующих разделах и в большинстве других модулей, чтобы вы могли опробовать изученные команды и действия в безопасной среде. Мы можем подключиться к нашим целям с помощью следующей команды:

#### Вход по SSH

  Системная информация

```shell-session
Barlogsha@htb[/htb]$ ssh [username]@[IP address]
```
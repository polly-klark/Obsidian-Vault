#htb #web 

Возможно, вы слышали о [терминах](https://en.wikipedia.org/wiki/Front_end_and_back_end) `front end` и `back end` веб-разработке или о термине [Full Stack](https://www.w3schools.com/whatis/whatis_fullstack.asp) веб-разработка, который относится как к `front` веб-разработке, так и к `back end` веб-разработке. Эти термины становятся синонимами разработки веб-приложений, поскольку они охватывают большую часть цикла веб-разработки. Однако эти термины сильно отличаются друг от друга, поскольку каждый из них относится к одной из сторон веб-приложения и выполняет свои функции в разных областях.

---

## Фронтенд

Фронтенд веб-приложения содержит компоненты, с которыми пользователь взаимодействует напрямую через веб-браузер (на стороне клиента). Эти компоненты составляют исходный код веб-страницы, которую мы видим при посещении веб-приложения, и обычно включают в себя `HTML`, `CSS`, и `JavaScript`, которые затем интерпретируются нашими браузерами в режиме реального времени.

![[Pasted image 20251221201745.png]]

Сюда входит всё, что видит пользователь и с чем он взаимодействует, например основные элементы страницы, такие как заголовок и текст [HTML](https://www.w3schools.com/html/html_intro.asp), дизайн и анимация всех элементов [CSS](https://www.w3schools.com/css/css_intro.asp), а также функции, которые выполняет каждая часть страницы [JavaScript](https://www.w3schools.com/js/js_intro.asp).

В современных веб-приложениях интерфейсные компоненты должны адаптироваться к любому размеру экрана и работать в любом браузере на любом устройстве. Это отличает их от серверных компонентов, которые обычно пишутся для конкретной платформы или операционной системы. Если интерфейсная часть веб-приложения плохо оптимизирована, это может привести к замедлению работы всего веб-приложения и потере отклика. В этом случае некоторые пользователи могут подумать, что хостинг-сервер или их интернет работают медленно, хотя проблема полностью лежит на стороне клиента, в браузере пользователя. Вот почему интерфейс веб-приложения должен быть оптимизирован для большинства платформ, устройств (включая мобильные!) и размеров экранов.

Помимо разработки внешнего интерфейса, существуют и другие задачи, связанные с разработкой веб-приложений:

- Веб-дизайн с визуальной концепцией
- Дизайн пользовательского интерфейса (UI)
- Дизайн пользовательского опыта (UX)

Существует множество сайтов, на которых можно попрактиковаться в программировании фронтенда. Один из примеров — [этот сайт](https://html-css-js.com/). Здесь мы можем поэкспериментировать с [редактором](https://htmlg.com/html-editor/), вводя и форматируя текст и наблюдая за тем, как для нас генерируются `HTML`, `CSS`, и `JavaScript`. Скопируйте и вставьте этот ОЧЕНЬ простой пример в правую часть редактора:

Код: html

```html
<p><strong>Welcome to Hack The Box Academy</strong><strong></strong></p>
<p></p>
<p><em>This is some italic text.</em></p>
<p></p>
<p><span style="color: #0000ff;">This is some blue text.</span></p>
<p></p>
<p></p>
```

Посмотрите, как отображается простой HTML-код слева. Поэкспериментируйте с форматированием, заголовками, цветами и т. д. и посмотрите, как меняется код.

---

## Бэкенд

Бэкенд веб-приложения управляет всеми основными функциями веб-приложения, которые выполняются на бэкенд-сервере, обрабатывающем все, что необходимо для корректной работы веб-приложения. Это та часть, которую мы можем никогда не увидеть или с которой не будем напрямую взаимодействовать, но веб-сайт — это просто набор статических веб-страниц без бэкенда.

Существует четыре основных компонента бэкенда для веб-приложений:

| **Компонент**            | **Описание**                                                                                                                                                                                                                     |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Back end Servers`       | Аппаратное обеспечение и операционная система, на которых работают все остальные компоненты, обычно используют такие операционные системы, как `Linux`, `Windows`, или `Containers`.                                             |
| `Web Servers`            | Веб-серверы обрабатывают HTTP-запросы и соединения. Вот несколько примеров: `Apache`, `NGINX`, и `IIS`.                                                                                                                          |
| `Databases`              | Базы данных (`DBs`) хранят и извлекают данные веб-приложений. Примерами реляционных баз данных являются `MySQL`, `MSSQL`, `Oracle`, `PostgreSQL`, а примерами нереляционных баз данных — `NoSQL` и `MongoDB`.                    |
| `Development Frameworks` | Фреймворки для разработки используются для создания ядра веб-приложения. Среди известных фреймворков можно назвать `Laravel` (`PHP`), `ASP.NET` (`C#`), `Spring` (`Java`), `Django` (`Python`), `Express` (`NodeJS JavaScript`). |

![[Pasted image 20251221201751.png]]

Также можно разместить каждый компонент серверной части на отдельном изолированном сервере или в изолированных контейнерах с помощью таких сервисов, как [Docker](https://www.docker.com/). Чтобы обеспечить логическое разделение и снизить влияние уязвимостей, различные компоненты веб-приложения, например база данных, могут быть установлены в одном контейнере Docker, а основное веб-приложение — в другом. Таким образом, каждая часть изолирована от потенциальных уязвимостей, которые могут повлиять на другой контейнер (контейнеры). Также можно разместить каждый компонент на отдельном выделенном сервере, но это может потребовать больше ресурсов и времени на обслуживание. Тем не менее это зависит от бизнес-кейса и дизайна/функциональности конкретного веб-приложения.

К основным задачам серверных компонентов относятся:

- Разработать основную логику и сервисы серверной части веб-приложения
- Разработать основной код и функциональные возможности веб-приложения
- Разработать и поддерживать серверную базу данных
- Разработать и внедрить библиотеки, которые будут использоваться веб-приложением
- Реализовать технические/бизнес-требования для веб-приложения
- Реализовать основные [API](https://en.wikipedia.org/wiki/API) для взаимодействия с интерфейсными компонентами
- Интегрировать удалённые серверы и облачные сервисы в веб-приложение

---

## Защита внешнего и внутреннего интерфейса

Несмотря на то, что в большинстве случаев у нас не будет доступа к внутреннему коду для анализа отдельных функций и структуры кода, это не делает приложение неуязвимым. Его всё равно можно взломать, например, с помощью различных атак с внедрением кода.

Предположим, у нас есть функция поиска в веб-приложении, которая по ошибке неправильно обрабатывает наши поисковые запросы. В таком случае мы можем использовать специальные методы для манипулирования запросами таким образом, чтобы получить несанкционированный доступ к определённым данным базы [SQL-инъекции](https://www.w3schools.com/sql/sql_injection.asp) или даже выполнить команды операционной системы через веб-приложение, что также известно как [командные инъекции](https://owasp.org/www-community/attacks/Command_Injection).

Позже мы обсудим, как защитить каждый компонент, используемый на фронтенде и бэкенде. Когда у нас будет полный доступ к исходному коду фронтенд-компонентов, мы сможем провести анализ кода и найти уязвимости. Это часть так называемого [пентестинга методом белого ящика](https://en.wikipedia.org/wiki/White-box_testing).

С другой стороны, исходный код серверных компонентов хранится на сервере, поэтому по умолчанию у нас нет к нему доступа. Это вынуждает нас проводить так называемое [пентестирование методом «чёрного ящика»](https://en.wikipedia.org/wiki/Black-box_testing). Однако, как мы увидим, некоторые веб-приложения имеют открытый исходный код, а значит, у нас, скорее всего, есть доступ к их исходному коду. Кроме того, некоторые уязвимости, такие как [включение локальных файлов](https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/07-Input_Validation_Testing/11.1-Testing_for_Local_File_Inclusion), могут позволить нам получить исходный код с сервера. Имея на руках этот исходный код, мы можем провести ревью серверных компонентов, чтобы лучше понять, как работает приложение, и, возможно, найти в исходном коде конфиденциальные данные (например, пароли) и даже уязвимости, которые было бы трудно или невозможно обнаружить без доступа к исходному коду.

`top 20` Наиболее распространённые ошибки веб-разработчиков, которые важны для нас как для специалистов по тестированию на проникновение:

| **№** | **Ошибка**                                             |
| ----- | ------------------------------------------------------ |
| `1.`  | Разрешение на ввод неверных данных в базу              |
| `2.`  | Сосредоточение на системе в целом                      |
| `3.`  | Внедрение собственных методов обеспечения безопасности |
| `4.`  | Безопасность — ваш последний рубеж                     |
| `5.`  | Разработка Хранилища Текстовых паролей                 |
| `6.`  | Создание Слабых Паролей                                |
| `7.`  | Хранение незашифрованных данных в базе данных          |
| `8.`  | Чрезмерная зависимость от клиента                      |
| `9.`  | Быть Слишком Оптимистичным                             |
| `10.` | Передача переменных через имя пути в URL               |
| `11.` | Доверие к стороннему коду                              |
| `12.` | Создание бэкдор-аккаунтов                              |
| `13.` | Непроверенные SQL-инъекции                             |
| `14.` | Удаленные включения файлов                             |
| `15.` | Небезопасная обработка данных                          |
| `16.` | Неправильное шифрование данных                         |
| `17.` | Использование небезопасной криптографической системы   |
| `18.` | Игнорирование уровня 8                                 |
| `19.` | Просмотр действий пользователя                         |
| `20.` | Неправильные настройки брандмауэра веб-приложения      |

Эти ошибки приводят к [OWASP Top 10](https://owasp.org/www-project-top-ten/) уязвимостям в веб-приложениях, которые мы рассмотрим в других модулях:

| **№** | **Уязвимость**                                  |
| ----- | ----------------------------------------------- |
| `1.`  | Сломанный Контроль Доступа                      |
| `2.`  | Криптографические сбои                          |
| `3.`  | Инъекция                                        |
| `4.`  | Небезопасный дизайн                             |
| `5.`  | Неправильная Конфигурация системы безопасности  |
| `6.`  | Уязвимые и устаревшие компоненты                |
| `7.`  | Сбои идентификации и аутентификации             |
| `8.`  | Сбои в работе программного обеспечения и данных |
| `9.`  | Сбои в системе безопасности и мониторинга       |
| `10.` | Подделка запросов на стороне сервера (SSRF)     |

Важно начать знакомиться с этими недостатками и уязвимостями, поскольку они лежат в основе многих проблем, которые мы будем рассматривать в будущих модулях, связанных с веб-технологиями и даже не связанных с ними. Как специалисты по тестированию на проникновение, мы должны уметь грамотно выявлять, использовать и объяснять нашим клиентам эти уязвимости.
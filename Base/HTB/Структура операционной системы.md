#windows #htb 

В операционных системах Windows корневой каталог — это <буква_диска>:\ (обычно это диск C). Корневой каталог (также известный как загрузочный раздел) — это место, где установлена операционная система. Другим физическим и виртуальным дискам присваиваются другие буквы, например, Data (E:). Структура каталогов загрузочного раздела выглядит следующим образом:

| Каталог                    | Функция                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Perflogs                   | Может содержать журналы производительности Windows, но по умолчанию пуст.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Program Files              | В 32-разрядных системах здесь установлены все 16-разрядные и 32-разрядные программы. В 64-разрядных системах здесь установлены только 64-разрядные программы.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Program Files (x86)        | 32-разрядные и 16-разрядные программы устанавливаются здесь на 64-разрядные версии Windows.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Program Data               | Это скрытая папка, содержащая данные, необходимые для запуска некоторых установленных программ. Эти данные доступны программе независимо от того, кто её запускает.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Users                      | Эта папка содержит профили пользователей для каждого пользователя, который входит в систему, и включает две папки: «Общие» и «По умолчанию».                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Default                    | Это шаблон профиля пользователя по умолчанию для всех созданных пользователей. При добавлении нового пользователя в систему его профиль основывается на профиле по умолчанию.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Public                     | Эта папка предназначена для обмена файлами между пользователями компьютера и по умолчанию доступна всем пользователям. Эта папка по умолчанию доступна по сети, но для доступа к ней требуется действующая учётная запись в сети.                                                                                                                                                                                                                                                                                                                                                                                 |
| AppData                    | Данные и настройки пользовательских приложений хранятся в скрытой подпапке пользователя (например, cliff.moore\AppData). Каждая из этих папок содержит три подпапки. Папка Roaming содержит независимые от компьютера данные, которые должны следовать за профилем пользователя, например пользовательские словари. Папка Local предназначена для конкретного компьютера и никогда не синхронизируется по сети. Папка LocalLow похожа на папку Local, но имеет более низкий уровень целостности данных. Поэтому его можно использовать, например, в веб-браузере, настроенном на защищённый или безопасный режим. |
| Windows                    | Здесь содержится большинство файлов, необходимых для операционной системы Windows.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| System, System32, SysWOW64 | Содержит все библиотеки DLL, необходимые для основных функций Windows и Windows API. Операционная система ищет эти папки каждый раз, когда программа запрашивает загрузку библиотеки DLL без указания абсолютного пути.                                                                                                                                                                                                                                                                                                                                                                                           |
| WinSxS                     | Магазин компонентов Windows содержит копии всех компонентов Windows, обновлений и пакетов обновлений.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

---

## Изучение каталогов С помощью командной строки

Мы можем исследовать файловую систему с помощью команды [dir](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/dir).

  Структура операционной системы

```cmd-session
C:\htb> dir c:\ /a
 Volume in drive C has no label.
 Volume Serial Number is F416-77BE

 Directory of c:\

08/16/2020  10:33 AM    <DIR>          $Recycle.Bin
06/25/2020  06:25 PM    <DIR>          $WinREAgent
07/02/2020  12:55 PM             1,024 AMTAG.BIN
06/25/2020  03:38 PM    <JUNCTION>     Documents and Settings [C:\Users]
08/13/2020  06:03 PM             8,192 DumpStack.log
08/17/2020  12:11 PM             8,192 DumpStack.log.tmp
08/27/2020  10:42 AM    37,752,373,248 hiberfil.sys
08/17/2020  12:11 PM    13,421,772,800 pagefile.sys
12/07/2019  05:14 AM    <DIR>          PerfLogs
08/24/2020  10:38 AM    <DIR>          Program Files
07/09/2020  06:08 PM    <DIR>          Program Files (x86)
08/24/2020  10:41 AM    <DIR>          ProgramData
06/25/2020  03:38 PM    <DIR>          Recovery
06/25/2020  03:57 PM             2,918 RHDSetup.log
08/17/2020  12:11 PM        16,777,216 swapfile.sys
08/26/2020  02:51 PM    <DIR>          System Volume Information
08/16/2020  10:33 AM    <DIR>          Users
08/17/2020  11:38 PM    <DIR>          Windows
               7 File(s) 51,190,943,590 bytes
              13 Dir(s)  261,310,697,472 bytes free
```

Утилита [tree](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/tree) полезна для графического отображения структуры каталогов в пути или на диске.

  Структура операционной системы

```cmd-session
C:\htb> tree "c:\Program Files (x86)\VMware"
Folder PATH listing
Volume serial number is F416-77BE
C:\PROGRAM FILES (X86)\VMWARE
├───VMware VIX
│   ├───doc
│   │   ├───errors
│   │   ├───features
│   │   ├───lang
│   │   │   └───c
│   │   │       └───functions
│   │   └───types
│   ├───samples
│   └───Workstation-15.0.0
│       ├───32bit
│       └───64bit
└───VMware Workstation
    ├───env
    ├───hostd
    │   ├───coreLocale
    │   │   └───en
    │   ├───docroot
    │   │   ├───client
    │   │   └───sdk
    │   ├───extensions
    │   │   └───hostdiag
    │   │       └───locale
    │   │           └───en
    │   └───vimLocale
    │       └───en
    ├───ico
    ├───messages
    │   ├───ja
    │   └───zh_CN
    ├───OVFTool
    │   ├───env
    │   │   └───en
    │   └───schemas
    │       ├───DMTF
    │       └───vmware
    ├───Resources
    ├───tools-upgraders
    └───x64
```

Команда `tree` может предоставить нам большой объём информации. Следующую команду можно использовать для просмотра всех файлов на диске C, по одному экрану за раз. Эту команду можно изменить, чтобы она работала с любым каталогом.

  Структура операционной системы

```cmd-session
tree c:\ /f | more
```
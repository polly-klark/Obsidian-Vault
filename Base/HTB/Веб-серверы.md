#web #htb 

[Веб-сервер](https://en.wikipedia.org/wiki/Web_server) — это приложение, работающее на внутреннем сервере, которое обрабатывает весь HTTP-трафик, поступающий от браузера на стороне клиента, перенаправляет его на запрошенные страницы и, наконец, отвечает браузеру на стороне клиента. Веб-серверы обычно работают на TCP-[портах](https://en.wikipedia.org/wiki/Port_\(computer_networking\)) `80` или `443` и отвечают за подключение конечных пользователей к различным частям веб-приложения, а также за обработку различных ответов.

---

## Рабочий процесс

Обычный веб-сервер принимает HTTP-запросы от клиента и отвечает различными HTTP-ответами и кодами, например кодом `200 OK` при успешном запросе, кодом `404 NOT FOUND` при запросе несуществующих страниц, кодом `403 FORBIDDEN` при запросе доступа к страницам с ограниченным доступом и так далее.

![[Pasted image 20251230124409.png]]

Ниже приведены наиболее распространённые [коды ответов HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status):

|Код|Описание|
|---|---|
|**Успешные ответы**||
|`200 OK`|Запрос выполнен успешно|
|**Перенаправление сообщений**||
|`301 Moved Permanently`|URL-адрес запрошенного ресурса был изменён навсегда|
|`302 Found`|URL-адрес запрошенного ресурса был временно изменён|
|**Ответы на ошибки клиента**||
|`400 Bad Request`|Сервер не смог обработать запрос из-за неправильного синтаксиса|
|`401 Unauthorized`|Попытка доступа к странице без аутентификации|
|`403 Forbidden`|У клиента нет прав доступа к контенту|
|`404 Not Found`|Сервер не может найти запрошенный ресурс|
|`405 Method Not Allowed`|Серверу известен метод запроса, но он отключен и не может быть использован|
|`408 Request Timeout`|Некоторые серверы отправляют этот ответ при неактивном соединении, даже если клиент не отправлял никаких запросов ранее|
|**Ответы на ошибки сервера**||
|`500 Internal Server Error`|Сервер столкнулся с ситуацией, которую он не знает, как разрешить|
|`502 Bad Gateway`|Сервер, выступающий в роли шлюза для получения ответа, необходимого для обработки запроса, получил неверный ответ|
|`504 Gateway Timeout`|Сервер выступает в роли шлюза и не может вовремя получить ответ|

Веб-серверы также принимают различные типы пользовательского ввода в рамках HTTP-запросов, включая текст, [JSON](https://www.w3schools.com/js/js_json_intro.asp) и даже двоичные данные (например, для загрузки файлов). Получив веб-запрос, веб-сервер отвечает за его маршрутизацию к месту назначения, запускает все необходимые для этого запроса процессы и возвращает ответ пользователю на стороне клиента. Страницы и файлы, которые веб-сервер обрабатывает и к которым направляет трафик, являются основными файлами веб-приложения.

Ниже приведён пример запроса страницы в терминале Linux с помощью утилиты [cURL](https://en.wikipedia.org/wiki/CURL) и получения ответа от сервера с использованием флага `-I`, который отображает заголовки:

  Веб-серверы

```shell-session
Barlogsha@htb[/htb]$ curl -I https://academy.hackthebox.com

HTTP/2 200
date: Tue, 15 Dec 2020 19:54:29 GMT
content-type: text/html; charset=UTF-8
...SNIP...
```

В этом примере с командой `cURL` показан исходный код веб-страницы:

  Веб-серверы

```shell-session
Barlogsha@htb[/htb]$ curl https://academy.hackthebox.com

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Cyber Security Training : HTB Academy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

Для запуска веб-приложений можно использовать множество типов веб-серверов. Большинство из них могут обрабатывать все типы сложных HTTP-запросов и обычно предоставляются бесплатно. Мы даже можем разработать собственный базовый веб-сервер с использованием таких языков, как `Python`, `JavaScript`, и `PHP`. Однако для каждого языка существует популярное веб-приложение, оптимизированное для обработки больших объёмов веб-трафика, что позволяет нам сэкономить время на создании собственного веб-сервера.

---

## Apache

![[Pasted image 20251230124418.png]]

[Apache](https://www.apache.org/) «или `httpd`» — самый распространённый веб-сервер в интернете, на котором размещено более `40%` всех интернет-сайтов. `Apache` обычно предустановлен в большинстве `Linux` дистрибутивов, а также может быть установлен на серверах Windows и macOS.

`Apache` Обычно `PHP` используется для разработки веб-приложений, но он также поддерживает другие языки, такие как `.Net`, `Python`, `Perl`, и даже языки операционных систем, такие как `Bash` через `CGI`. Пользователи могут устанавливать самые разные модули `Apache` для расширения его функциональности и поддержки большего количества языков. Например, чтобы поддерживать работу с `PHP` файлами, пользователи должны установить `PHP` на внутреннем сервере, а также модуль `mod_php` для `Apache`.

`Apache` это проект с открытым исходным кодом, и пользователи сообщества могут получить доступ к его исходному коду для исправления проблем и поиска уязвимостей. Он хорошо поддерживается и регулярно исправляется от уязвимостей, чтобы обезопасить его от эксплуатации. Кроме того, он очень хорошо документирован, что относительно упрощает использование и настройку различных частей веб-сервера. `Apache` обычно используется стартапами и небольшими компаниями, поскольку для него просто разрабатывать. Тем не менее, некоторые крупные компании используют Apache, в том числе:

|`Apple`|`Adobe`|`Baidu`|
|---|---|---|

---

## NGINX

![[Pasted image 20251230124427.png]]

[NGINX](https://www.nginx.com/) — второй по распространённости веб-сервер в интернете, на котором размещено примерно `30%` всех интернет-сайтов. `NGINX` ориентирован на обслуживание множества одновременных веб-запросов с относительно низкой нагрузкой на память и процессор за счёт использования асинхронной архитектуры. Это делает `NGINX` очень надёжным веб-сервером для популярных веб-приложений и ведущих компаний по всему миру, поэтому он является самым популярным веб-сервером среди сайтов с высокой посещаемостью: около 60 % из 100 000 крупнейших сайтов используют `NGINX`.

`NGINX` также бесплатен и имеет открытый исходный код, что обеспечивает все те же преимущества, о которых говорилось ранее, такие как безопасность и надёжность. Среди популярных веб-сайтов, использующих `NGINX`, можно назвать:

|`Google`|`Facebook`|`Twitter`|`Cisco`|`Intel`|`Netflix`|`HackTheBox`|
|---|---|---|---|---|---|---|

---

## IIS

![[Pasted image 20251230124435.png]]

[IIS (Internet Information Services)](https://en.wikipedia.org/wiki/Internet_Information_Services) — третий по распространённости веб-сервер в интернете, на котором размещено около `15%` всех интернет-сайтов. `IIS` разработан и поддерживается компанией Microsoft и в основном работает на серверах Microsoft Windows. `IIS` обычно используется для размещения веб-приложений, разработанных для платформы Microsoft .NET, но может также использоваться для размещения веб-приложений, разработанных на других языках, таких как `PHP`, или для размещения других типов сервисов, таких как `FTP`. Кроме того, `IIS` очень хорошо оптимизирован для интеграции с Active Directory и включает в себя такие функции, как `Windows Auth` для аутентификации пользователей с помощью Active Directory, что позволяет им автоматически входить в веб-приложения.

Хотя `IIS` и не является самым популярным веб-сервером, многие крупные организации используют его в качестве веб-сервера. Многие из них используют Windows Server в качестве серверной части или в значительной степени полагаются на Active Directory в рамках своей организации. Среди популярных веб-сайтов, использующих IIS, можно назвать:

|`Microsoft`|`Office365`|`Skype`|`Stack Overflow`|`Dell`|
|---|---|---|---|---|

Помимо этих трёх веб-серверов, существует множество других широко используемых веб-серверов, таких как [Apache Tomcat](https://tomcat.apache.org/) для `Java` веб-приложений и [Node.JS](https://nodejs.org/en/) для веб-приложений, разработанных с использованием `JavaScript` на стороне сервера.